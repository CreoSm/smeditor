var ei=(w,f,b)=>{if(!f.has(w))throw TypeError("Cannot "+b)};var Z=(w,f,b)=>(ei(w,f,"read from private field"),b?b.call(w):f.get(w)),Ee=(w,f,b)=>{if(f.has(w))throw TypeError("Cannot add the same private member more than once");f instanceof WeakSet?f.add(w):f.set(w,b)},ye=(w,f,b,h)=>(ei(w,f,"write to private field"),h?h.call(w,b):f.set(w,b),b);import{g as Wo,c as Hr}from"./index.dbd57bdb.js";import{isChunkObject as xo,errors as qo}from"./util.67d6eed2.js";const Oo={},ko=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"})),Xr=Wo(ko);var br={exports:{}},ti;function vo(){return ti||(ti=1,function(w,f){(function(b,h){h(f)})(Hr,function(b){const h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function g(){}function C(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Hr<"u")return Hr}const E=C();function c(e){return typeof e=="object"&&e!==null||typeof e=="function"}const Y=g,Q=Promise,M=Promise.prototype.then,j=Promise.resolve.bind(Q),V=Promise.reject.bind(Q);function R(e){return new Q(e)}function S(e){return j(e)}function _(e){return V(e)}function v(e,t,i){return M.call(e,t,i)}function O(e,t,i){v(v(e,t,i),void 0,Y)}function L(e,t){O(e,t)}function G(e,t){O(e,void 0,t)}function te(e,t,i){return v(e,t,i)}function D(e){v(e,void 0,Y)}const Oe=(()=>{const e=E&&E.queueMicrotask;if(typeof e=="function")return e;const t=S(void 0);return i=>v(t,i)})();function ke(e,t,i){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,i)}function _e(e,t,i){try{return S(ke(e,t,i))}catch(s){return _(s)}}const Wt=16384;class se{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){const i=this._back;let s=i;i._elements.length===Wt-1&&(s={_elements:[],_next:void 0}),i._elements.push(t),s!==i&&(this._back=s,i._next=s),++this._size}shift(){const t=this._front;let i=t;const s=this._cursor;let l=s+1;const m=t._elements,y=m[s];return l===Wt&&(i=t._next,l=0),--this._size,this._cursor=l,t!==i&&(this._front=i),m[s]=void 0,y}forEach(t){let i=this._cursor,s=this._front,l=s._elements;for(;(i!==l.length||s._next!==void 0)&&!(i===l.length&&(s=s._next,l=s._elements,i=0,l.length===0));)t(l[i]),++i}peek(){const t=this._front,i=this._cursor;return t._elements[i]}}function xt(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?Ye(e):t._state==="closed"?wr(e):qt(e,t._storedError)}function lt(e,t){const i=e._ownerReadableStream;return he(i,t)}function ce(e){e._ownerReadableStream._state==="readable"?ft(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):gr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function we(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Ye(e){e._closedPromise=R((t,i)=>{e._closedPromise_resolve=t,e._closedPromise_reject=i})}function qt(e,t){Ye(e),ft(e,t)}function wr(e){Ye(e),Ot(e)}function ft(e,t){e._closedPromise_reject!==void 0&&(D(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function gr(e,t){qt(e,t)}function Ot(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const N=h("[[AbortSteps]]"),X=h("[[ErrorSteps]]"),Qe=h("[[CancelSteps]]"),Ve=h("[[PullSteps]]"),ct=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},kt=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function vt(e){return typeof e=="object"||typeof e=="function"}function ee(e,t){if(e!==void 0&&!vt(e))throw new TypeError(`${t} is not an object.`)}function re(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function zt(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Dt(e,t){if(!zt(e))throw new TypeError(`${t} is not an object.`)}function le(e,t,i){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${i}'.`)}function be(e,t,i){if(e===void 0)throw new TypeError(`${t} is required in '${i}'.`)}function ge(e){return Number(e)}function Ut(e){return e===0?0:e}function Sr(e){return Ut(kt(e))}function Ge(e,t){const s=Number.MAX_SAFE_INTEGER;let l=Number(e);if(l=Ut(l),!ct(l))throw new TypeError(`${t} is not a finite number`);if(l=Sr(l),l<0||l>s)throw new TypeError(`${t} is outside the accepted range of ${0} to ${s}, inclusive`);return!ct(l)||l===0?0:l}function dt(e,t){if(!Fe(e))throw new TypeError(`${t} is not a ReadableStream.`)}function Be(e){return new ve(e)}function ht(e,t){e._reader._readRequests.push(t)}function Te(e,t,i){const l=e._reader._readRequests.shift();i?l._closeSteps():l._chunkSteps(t)}function ne(e){return e._reader._readRequests.length}function Xe(e){const t=e._reader;return!(t===void 0||!J(t))}class ve{constructor(t){if(le(t,1,"ReadableStreamDefaultReader"),dt(t,"First parameter"),We(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");xt(this,t),this._readRequests=new se}get closed(){return J(this)?this._closedPromise:_(o("closed"))}cancel(t=void 0){return J(this)?this._ownerReadableStream===void 0?_(we("cancel")):lt(this,t):_(o("cancel"))}read(){if(!J(this))return _(o("read"));if(this._ownerReadableStream===void 0)return _(we("read from"));let t,i;const s=R((m,y)=>{t=m,i=y});return ze(this,{_chunkSteps:m=>t({value:m,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:m=>i(m)}),s}releaseLock(){if(!J(this))throw o("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ce(this)}}}Object.defineProperties(ve.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(ve.prototype,h.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function J(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof ve}function ze(e,t){const i=e._ownerReadableStream;i._disturbed=!0,i._state==="closed"?t._closeSteps():i._state==="errored"?t._errorSteps(i._storedError):i._readableStreamController[Ve](t)}function o(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}const r=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class n{constructor(t,i){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=i}next(){const t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?te(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){const i=()=>this._returnSteps(t);return this._ongoingPromise?te(this._ongoingPromise,i,i):i()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const t=this._reader;if(t._ownerReadableStream===void 0)return _(we("iterate"));let i,s;const l=R((y,B)=>{i=y,s=B});return ze(t,{_chunkSteps:y=>{this._ongoingPromise=void 0,Oe(()=>i({value:y,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ce(t),i({value:void 0,done:!0})},_errorSteps:y=>{this._ongoingPromise=void 0,this._isFinished=!0,ce(t),s(y)}}),l}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;const i=this._reader;if(i._ownerReadableStream===void 0)return _(we("finish iterating"));if(!this._preventCancel){const s=lt(i,t);return ce(i),te(s,()=>({value:t,done:!0}))}return ce(i),S({value:t,done:!0})}}const a={next(){return d(this)?this._asyncIteratorImpl.next():_(p("next"))},return(e){return d(this)?this._asyncIteratorImpl.return(e):_(p("return"))}};r!==void 0&&Object.setPrototypeOf(a,r);function u(e,t){const i=Be(e),s=new n(i,t),l=Object.create(a);return l._asyncIteratorImpl=s,l}function d(e){if(!c(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof n}catch{return!1}}function p(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}const A=Number.isNaN||function(e){return e!==e};function k(e){return e.slice()}function z(e,t,i,s,l){new Uint8Array(e).set(new Uint8Array(i,s,l),t)}function $(e){return e}function W(e){return!1}function rn(e,t,i){if(e.slice)return e.slice(t,i);const s=i-t,l=new ArrayBuffer(s);return z(l,0,e,t,s),l}function di(e){return!(typeof e!="number"||A(e)||e<0)}function nn(e){const t=rn(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function Rr(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function Er(e,t,i){if(!di(i)||i===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:i}),e._queueTotalSize+=i}function hi(e){return e._queue.peek().value}function Ae(e){e._queue=new se,e._queueTotalSize=0}class pt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Cr(this))throw Pr("view");return this._view}respond(t){if(!Cr(this))throw Pr("respond");if(le(t,1,"respond"),t=Ge(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");W(this._view.buffer),Nt(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!Cr(this))throw Pr("respondWithNewView");if(le(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");W(t.buffer),Ht(this._associatedReadableByteStreamController,t)}}Object.defineProperties(pt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(pt.prototype,h.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Je{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!De(this))throw mt("byobRequest");return Ar(this)}get desiredSize(){if(!De(this))throw mt("desiredSize");return dn(this)}close(){if(!De(this))throw mt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);bt(this)}enqueue(t){if(!De(this))throw mt("enqueue");if(le(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const i=this._controlledReadableByteStream._state;if(i!=="readable")throw new TypeError(`The stream (in ${i} state) is not in the readable state and cannot be enqueued to`);$t(this,t)}error(t=void 0){if(!De(this))throw mt("error");de(this,t)}[Qe](t){on(this),Ae(this);const i=this._cancelAlgorithm(t);return Lt(this),i}[Ve](t){const i=this._controlledReadableByteStream;if(this._queueTotalSize>0){const l=this._queue.shift();this._queueTotalSize-=l.byteLength,ln(this);const m=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);t._chunkSteps(m);return}const s=this._autoAllocateChunkSize;if(s!==void 0){let l;try{l=new ArrayBuffer(s)}catch(y){t._errorSteps(y);return}const m={buffer:l,bufferByteLength:s,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(m)}ht(i,t),Ue(this)}}Object.defineProperties(Je.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(Je.prototype,h.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function De(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Je}function Cr(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof pt}function Ue(e){if(!yi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;const i=e._pullAlgorithm();O(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ue(e))},s=>{de(e,s)})}function on(e){Tr(e),e._pendingPullIntos=new se}function Br(e,t){let i=!1;e._state==="closed"&&(i=!0);const s=an(t);t.readerType==="default"?Te(e,s,i):gi(e,s,i)}function an(e){const t=e.bytesFilled,i=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/i)}function Mt(e,t,i,s){e._queue.push({buffer:t,byteOffset:i,byteLength:s}),e._queueTotalSize+=s}function sn(e,t){const i=t.elementSize,s=t.bytesFilled-t.bytesFilled%i,l=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),m=t.bytesFilled+l,y=m-m%i;let B=l,P=!1;y>s&&(B=y-t.bytesFilled,P=!0);const F=e._queue;for(;B>0;){const x=F.peek(),q=Math.min(B,x.byteLength),H=t.byteOffset+t.bytesFilled;z(t.buffer,H,x.buffer,x.byteOffset,q),x.byteLength===q?F.shift():(x.byteOffset+=q,x.byteLength-=q),e._queueTotalSize-=q,un(e,q,t),B-=q}return P}function un(e,t,i){i.bytesFilled+=t}function ln(e){e._queueTotalSize===0&&e._closeRequested?(Lt(e),Ct(e._controlledReadableByteStream)):Ue(e)}function Tr(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function fn(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;const t=e._pendingPullIntos.peek();sn(e,t)&&(jt(e),Br(e._controlledReadableByteStream,t))}}function pi(e,t,i){const s=e._controlledReadableByteStream;let l=1;t.constructor!==DataView&&(l=t.constructor.BYTES_PER_ELEMENT);const m=t.constructor,y=t.buffer,B={buffer:y,bufferByteLength:y.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:l,viewConstructor:m,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(B),bn(s,i);return}if(s._state==="closed"){const P=new m(B.buffer,B.byteOffset,0);i._closeSteps(P);return}if(e._queueTotalSize>0){if(sn(e,B)){const P=an(B);ln(e),i._chunkSteps(P);return}if(e._closeRequested){const P=new TypeError("Insufficient bytes to fill elements in the given buffer");de(e,P),i._errorSteps(P);return}}e._pendingPullIntos.push(B),bn(s,i),Ue(e)}function bi(e,t){const i=e._controlledReadableByteStream;if(Ir(i))for(;mn(i)>0;){const s=jt(e);Br(i,s)}}function mi(e,t,i){if(un(e,t,i),i.bytesFilled<i.elementSize)return;jt(e);const s=i.bytesFilled%i.elementSize;if(s>0){const l=i.byteOffset+i.bytesFilled,m=rn(i.buffer,l-s,l);Mt(e,m,0,m.byteLength)}i.bytesFilled-=s,Br(e._controlledReadableByteStream,i),fn(e)}function cn(e,t){const i=e._pendingPullIntos.peek();Tr(e),e._controlledReadableByteStream._state==="closed"?bi(e):mi(e,t,i),Ue(e)}function jt(e){return e._pendingPullIntos.shift()}function yi(e){const t=e._controlledReadableByteStream;return t._state!=="readable"||e._closeRequested||!e._started?!1:!!(Xe(t)&&ne(t)>0||Ir(t)&&mn(t)>0||dn(e)>0)}function Lt(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function bt(e){const t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){const s=new TypeError("Insufficient bytes to fill elements in the given buffer");throw de(e,s),s}Lt(e),Ct(t)}}function $t(e,t){const i=e._controlledReadableByteStream;if(e._closeRequested||i._state!=="readable")return;const s=t.buffer,l=t.byteOffset,m=t.byteLength,y=s;if(e._pendingPullIntos.length>0){const B=e._pendingPullIntos.peek();W(B.buffer),B.buffer=B.buffer}if(Tr(e),Xe(i))if(ne(i)===0)Mt(e,y,l,m);else{e._pendingPullIntos.length>0&&jt(e);const B=new Uint8Array(y,l,m);Te(i,B,!1)}else Ir(i)?(Mt(e,y,l,m),fn(e)):Mt(e,y,l,m);Ue(e)}function de(e,t){const i=e._controlledReadableByteStream;i._state==="readable"&&(on(e),Ae(e),Lt(e),Mn(i,t))}function Ar(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),i=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),s=Object.create(pt.prototype);wi(s,e,i),e._byobRequest=s}return e._byobRequest}function dn(e){const t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Nt(e,t){const i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(i.bytesFilled+t>i.byteLength)throw new RangeError("bytesWritten out of range")}i.buffer=i.buffer,cn(e,t)}function Ht(e,t){const i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(i.byteOffset+i.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(i.bytesFilled+t.byteLength>i.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const l=t.byteLength;i.buffer=t.buffer,cn(e,l)}function hn(e,t,i,s,l,m,y){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Ae(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=m,t._pullAlgorithm=s,t._cancelAlgorithm=l,t._autoAllocateChunkSize=y,t._pendingPullIntos=new se,e._readableStreamController=t;const B=i();O(S(B),()=>{t._started=!0,Ue(t)},P=>{de(t,P)})}function _i(e,t,i){const s=Object.create(Je.prototype);let l=()=>{},m=()=>S(void 0),y=()=>S(void 0);t.start!==void 0&&(l=()=>t.start(s)),t.pull!==void 0&&(m=()=>t.pull(s)),t.cancel!==void 0&&(y=P=>t.cancel(P));const B=t.autoAllocateChunkSize;if(B===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");hn(e,s,l,m,y,i,B)}function wi(e,t,i){e._associatedReadableByteStreamController=t,e._view=i}function Pr(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function mt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function pn(e){return new yt(e)}function bn(e,t){e._reader._readIntoRequests.push(t)}function gi(e,t,i){const l=e._reader._readIntoRequests.shift();i?l._closeSteps(t):l._chunkSteps(t)}function mn(e){return e._reader._readIntoRequests.length}function Ir(e){const t=e._reader;return!(t===void 0||!Me(t))}class yt{constructor(t){if(le(t,1,"ReadableStreamBYOBReader"),dt(t,"First parameter"),We(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!De(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");xt(this,t),this._readIntoRequests=new se}get closed(){return Me(this)?this._closedPromise:_(Yt("closed"))}cancel(t=void 0){return Me(this)?this._ownerReadableStream===void 0?_(we("cancel")):lt(this,t):_(Yt("cancel"))}read(t){if(!Me(this))return _(Yt("read"));if(!ArrayBuffer.isView(t))return _(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return _(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return _(new TypeError("view's buffer must have non-zero byteLength"));if(W(t.buffer),this._ownerReadableStream===void 0)return _(we("read from"));let i,s;const l=R((y,B)=>{i=y,s=B});return yn(this,t,{_chunkSteps:y=>i({value:y,done:!1}),_closeSteps:y=>i({value:y,done:!0}),_errorSteps:y=>s(y)}),l}releaseLock(){if(!Me(this))throw Yt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ce(this)}}}Object.defineProperties(yt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(yt.prototype,h.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Me(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof yt}function yn(e,t,i){const s=e._ownerReadableStream;s._disturbed=!0,s._state==="errored"?i._errorSteps(s._storedError):pi(s._readableStreamController,t,i)}function Yt(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function _t(e,t){const{highWaterMark:i}=e;if(i===void 0)return t;if(A(i)||i<0)throw new RangeError("Invalid highWaterMark");return i}function Qt(e){const{size:t}=e;return t||(()=>1)}function Vt(e,t){ee(e,t);const i=e?.highWaterMark,s=e?.size;return{highWaterMark:i===void 0?void 0:ge(i),size:s===void 0?void 0:Si(s,`${t} has member 'size' that`)}}function Si(e,t){return re(e,t),i=>ge(e(i))}function Ri(e,t){ee(e,t);const i=e?.abort,s=e?.close,l=e?.start,m=e?.type,y=e?.write;return{abort:i===void 0?void 0:Ei(i,e,`${t} has member 'abort' that`),close:s===void 0?void 0:Ci(s,e,`${t} has member 'close' that`),start:l===void 0?void 0:Bi(l,e,`${t} has member 'start' that`),write:y===void 0?void 0:Ti(y,e,`${t} has member 'write' that`),type:m}}function Ei(e,t,i){return re(e,i),s=>_e(e,t,[s])}function Ci(e,t,i){return re(e,i),()=>_e(e,t,[])}function Bi(e,t,i){return re(e,i),s=>ke(e,t,[s])}function Ti(e,t,i){return re(e,i),(s,l)=>_e(e,t,[s,l])}function _n(e,t){if(!Ze(e))throw new TypeError(`${t} is not a WritableStream.`)}function Ai(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}const Pi=typeof AbortController=="function";function Ii(){if(Pi)return new AbortController}class wt{constructor(t={},i={}){t===void 0?t=null:Dt(t,"First parameter");const s=Vt(i,"Second parameter"),l=Ri(t,"First parameter");if(gn(this),l.type!==void 0)throw new RangeError("Invalid type is specified");const y=Qt(s),B=_t(s,1);$i(this,l,B,y)}get locked(){if(!Ze(this))throw Kt("locked");return Ke(this)}abort(t=void 0){return Ze(this)?Ke(this)?_(new TypeError("Cannot abort a stream that already has a writer")):Gt(this,t):_(Kt("abort"))}close(){return Ze(this)?Ke(this)?_(new TypeError("Cannot close a stream that already has a writer")):me(this)?_(new TypeError("Cannot close an already-closing stream")):Sn(this):_(Kt("close"))}getWriter(){if(!Ze(this))throw Kt("getWriter");return wn(this)}}Object.defineProperties(wt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(wt.prototype,h.toStringTag,{value:"WritableStream",configurable:!0});function wn(e){return new gt(e)}function Fi(e,t,i,s,l=1,m=()=>1){const y=Object.create(wt.prototype);gn(y);const B=Object.create(et.prototype);return An(y,B,e,t,i,s,l,m),y}function gn(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new se,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Ze(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof wt}function Ke(e){return e._writer!==void 0}function Gt(e,t){var i;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=t,(i=e._writableStreamController._abortController)===null||i===void 0||i.abort();const s=e._state;if(s==="closed"||s==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let l=!1;s==="erroring"&&(l=!0,t=void 0);const m=R((y,B)=>{e._pendingAbortRequest={_promise:void 0,_resolve:y,_reject:B,_reason:t,_wasAlreadyErroring:l}});return e._pendingAbortRequest._promise=m,l||Wr(e,t),m}function Sn(e){const t=e._state;if(t==="closed"||t==="errored")return _(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const i=R((l,m)=>{const y={_resolve:l,_reject:m};e._closeRequest=y}),s=e._writer;return s!==void 0&&e._backpressure&&t==="writable"&&Mr(s),Ni(e._writableStreamController),i}function Wi(e){return R((i,s)=>{const l={_resolve:i,_reject:s};e._writeRequests.push(l)})}function Fr(e,t){if(e._state==="writable"){Wr(e,t);return}xr(e)}function Wr(e,t){const i=e._writableStreamController;e._state="erroring",e._storedError=t;const s=e._writer;s!==void 0&&En(s,t),!vi(e)&&i._started&&xr(e)}function xr(e){e._state="errored",e._writableStreamController[X]();const t=e._storedError;if(e._writeRequests.forEach(l=>{l._reject(t)}),e._writeRequests=new se,e._pendingAbortRequest===void 0){Xt(e);return}const i=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,i._wasAlreadyErroring){i._reject(t),Xt(e);return}const s=e._writableStreamController[N](i._reason);O(s,()=>{i._resolve(),Xt(e)},l=>{i._reject(l),Xt(e)})}function xi(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function qi(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,Fr(e,t)}function Oi(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";const i=e._writer;i!==void 0&&Wn(i)}function ki(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),Fr(e,t)}function me(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function vi(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function zi(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Di(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Xt(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;t!==void 0&&Dr(t,e._storedError)}function qr(e,t){const i=e._writer;i!==void 0&&t!==e._backpressure&&(t?Ji(i):Mr(i)),e._backpressure=t}class gt{constructor(t){if(le(t,1,"WritableStreamDefaultWriter"),_n(t,"First parameter"),Ke(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;const i=t._state;if(i==="writable")!me(t)&&t._backpressure?tr(this):xn(this),er(this);else if(i==="erroring")Ur(this,t._storedError),er(this);else if(i==="closed")xn(this),Gi(this);else{const s=t._storedError;Ur(this,s),Fn(this,s)}}get closed(){return je(this)?this._closedPromise:_(Le("closed"))}get desiredSize(){if(!je(this))throw Le("desiredSize");if(this._ownerWritableStream===void 0)throw St("desiredSize");return Li(this)}get ready(){return je(this)?this._readyPromise:_(Le("ready"))}abort(t=void 0){return je(this)?this._ownerWritableStream===void 0?_(St("abort")):Ui(this,t):_(Le("abort"))}close(){if(!je(this))return _(Le("close"));const t=this._ownerWritableStream;return t===void 0?_(St("close")):me(t)?_(new TypeError("Cannot close an already-closing stream")):Rn(this)}releaseLock(){if(!je(this))throw Le("releaseLock");this._ownerWritableStream!==void 0&&Cn(this)}write(t=void 0){return je(this)?this._ownerWritableStream===void 0?_(St("write to")):Bn(this,t):_(Le("write"))}}Object.defineProperties(gt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(gt.prototype,h.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function je(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof gt}function Ui(e,t){const i=e._ownerWritableStream;return Gt(i,t)}function Rn(e){const t=e._ownerWritableStream;return Sn(t)}function Mi(e){const t=e._ownerWritableStream,i=t._state;return me(t)||i==="closed"?S(void 0):i==="errored"?_(t._storedError):Rn(e)}function ji(e,t){e._closedPromiseState==="pending"?Dr(e,t):Xi(e,t)}function En(e,t){e._readyPromiseState==="pending"?qn(e,t):Zi(e,t)}function Li(e){const t=e._ownerWritableStream,i=t._state;return i==="errored"||i==="erroring"?null:i==="closed"?0:Pn(t._writableStreamController)}function Cn(e){const t=e._ownerWritableStream,i=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");En(e,i),ji(e,i),t._writer=void 0,e._ownerWritableStream=void 0}function Bn(e,t){const i=e._ownerWritableStream,s=i._writableStreamController,l=Hi(s,t);if(i!==e._ownerWritableStream)return _(St("write to"));const m=i._state;if(m==="errored")return _(i._storedError);if(me(i)||m==="closed")return _(new TypeError("The stream is closing or closed and cannot be written to"));if(m==="erroring")return _(i._storedError);const y=Wi(i);return Yi(s,t,l),y}const Tn={};class et{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Or(this))throw zr("abortReason");return this._abortReason}get signal(){if(!Or(this))throw zr("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!Or(this))throw zr("error");this._controlledWritableStream._state==="writable"&&In(this,t)}[N](t){const i=this._abortAlgorithm(t);return Jt(this),i}[X](){Ae(this)}}Object.defineProperties(et.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(et.prototype,h.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Or(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof et}function An(e,t,i,s,l,m,y,B){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Ae(t),t._abortReason=void 0,t._abortController=Ii(),t._started=!1,t._strategySizeAlgorithm=B,t._strategyHWM=y,t._writeAlgorithm=s,t._closeAlgorithm=l,t._abortAlgorithm=m;const P=vr(t);qr(e,P);const F=i(),x=S(F);O(x,()=>{t._started=!0,Zt(t)},q=>{t._started=!0,Fr(e,q)})}function $i(e,t,i,s){const l=Object.create(et.prototype);let m=()=>{},y=()=>S(void 0),B=()=>S(void 0),P=()=>S(void 0);t.start!==void 0&&(m=()=>t.start(l)),t.write!==void 0&&(y=F=>t.write(F,l)),t.close!==void 0&&(B=()=>t.close()),t.abort!==void 0&&(P=F=>t.abort(F)),An(e,l,m,y,B,P,i,s)}function Jt(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ni(e){Er(e,Tn,0),Zt(e)}function Hi(e,t){try{return e._strategySizeAlgorithm(t)}catch(i){return kr(e,i),1}}function Pn(e){return e._strategyHWM-e._queueTotalSize}function Yi(e,t,i){try{Er(e,t,i)}catch(l){kr(e,l);return}const s=e._controlledWritableStream;if(!me(s)&&s._state==="writable"){const l=vr(e);qr(s,l)}Zt(e)}function Zt(e){const t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring"){xr(t);return}if(e._queue.length===0)return;const s=hi(e);s===Tn?Qi(e):Vi(e,s)}function kr(e,t){e._controlledWritableStream._state==="writable"&&In(e,t)}function Qi(e){const t=e._controlledWritableStream;zi(t),Rr(e);const i=e._closeAlgorithm();Jt(e),O(i,()=>{Oi(t)},s=>{ki(t,s)})}function Vi(e,t){const i=e._controlledWritableStream;Di(i);const s=e._writeAlgorithm(t);O(s,()=>{xi(i);const l=i._state;if(Rr(e),!me(i)&&l==="writable"){const m=vr(e);qr(i,m)}Zt(e)},l=>{i._state==="writable"&&Jt(e),qi(i,l)})}function vr(e){return Pn(e)<=0}function In(e,t){const i=e._controlledWritableStream;Jt(e),Wr(i,t)}function Kt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function zr(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Le(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function St(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function er(e){e._closedPromise=R((t,i)=>{e._closedPromise_resolve=t,e._closedPromise_reject=i,e._closedPromiseState="pending"})}function Fn(e,t){er(e),Dr(e,t)}function Gi(e){er(e),Wn(e)}function Dr(e,t){e._closedPromise_reject!==void 0&&(D(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Xi(e,t){Fn(e,t)}function Wn(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function tr(e){e._readyPromise=R((t,i)=>{e._readyPromise_resolve=t,e._readyPromise_reject=i}),e._readyPromiseState="pending"}function Ur(e,t){tr(e),qn(e,t)}function xn(e){tr(e),Mr(e)}function qn(e,t){e._readyPromise_reject!==void 0&&(D(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Ji(e){tr(e)}function Zi(e,t){Ur(e,t)}function Mr(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}const On=typeof DOMException<"u"?DOMException:void 0;function Ki(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function eo(){const e=function(i,s){this.message=i||"",this.name=s||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}const to=Ki(On)?On:eo();function kn(e,t,i,s,l,m){const y=Be(e),B=wn(t);e._disturbed=!0;let P=!1,F=S(void 0);return R((x,q)=>{let H;if(m!==void 0){if(H=()=>{const T=new to("Aborted","AbortError"),I=[];s||I.push(()=>t._state==="writable"?Gt(t,T):S(void 0)),l||I.push(()=>e._state==="readable"?he(e,T):S(void 0)),oe(()=>Promise.all(I.map(U=>U())),!0,T)},m.aborted){H();return}m.addEventListener("abort",H)}function pe(){return R((T,I)=>{function U(ue){ue?T():v(nt(),U,I)}U(!1)})}function nt(){return P?S(!0):v(B._readyPromise,()=>R((T,I)=>{ze(y,{_chunkSteps:U=>{F=v(Bn(B,U),void 0,g),T(!1)},_closeSteps:()=>T(!0),_errorSteps:I})}))}if(Se(e,y._closedPromise,T=>{s?fe(!0,T):oe(()=>Gt(t,T),!0,T)}),Se(t,B._closedPromise,T=>{l?fe(!0,T):oe(()=>he(e,T),!0,T)}),ie(e,y._closedPromise,()=>{i?fe():oe(()=>Mi(B))}),me(t)||t._state==="closed"){const T=new TypeError("the destination writable stream closed before all data could be piped to it");l?fe(!0,T):oe(()=>he(e,T),!0,T)}D(pe());function xe(){const T=F;return v(F,()=>T!==F?xe():void 0)}function Se(T,I,U){T._state==="errored"?U(T._storedError):G(I,U)}function ie(T,I,U){T._state==="closed"?U():L(I,U)}function oe(T,I,U){if(P)return;P=!0,t._state==="writable"&&!me(t)?L(xe(),ue):ue();function ue(){O(T(),()=>Re(I,U),it=>Re(!0,it))}}function fe(T,I){P||(P=!0,t._state==="writable"&&!me(t)?L(xe(),()=>Re(T,I)):Re(T,I))}function Re(T,I){Cn(B),ce(y),m!==void 0&&m.removeEventListener("abort",H),T?q(I):x(void 0)}})}class tt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!rr(this))throw or("desiredSize");return jr(this)}close(){if(!rr(this))throw or("close");if(!rt(this))throw new TypeError("The stream is not in a state that permits close");Et(this)}enqueue(t=void 0){if(!rr(this))throw or("enqueue");if(!rt(this))throw new TypeError("The stream is not in a state that permits enqueue");return ir(this,t)}error(t=void 0){if(!rr(this))throw or("error");Pe(this,t)}[Qe](t){Ae(this);const i=this._cancelAlgorithm(t);return nr(this),i}[Ve](t){const i=this._controlledReadableStream;if(this._queue.length>0){const s=Rr(this);this._closeRequested&&this._queue.length===0?(nr(this),Ct(i)):Rt(this),t._chunkSteps(s)}else ht(i,t),Rt(this)}}Object.defineProperties(tt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(tt.prototype,h.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function rr(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof tt}function Rt(e){if(!vn(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;const i=e._pullAlgorithm();O(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Rt(e))},s=>{Pe(e,s)})}function vn(e){const t=e._controlledReadableStream;return!rt(e)||!e._started?!1:!!(We(t)&&ne(t)>0||jr(e)>0)}function nr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Et(e){if(!rt(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(nr(e),Ct(t))}function ir(e,t){if(!rt(e))return;const i=e._controlledReadableStream;if(We(i)&&ne(i)>0)Te(i,t,!1);else{let s;try{s=e._strategySizeAlgorithm(t)}catch(l){throw Pe(e,l),l}try{Er(e,t,s)}catch(l){throw Pe(e,l),l}}Rt(e)}function Pe(e,t){const i=e._controlledReadableStream;i._state==="readable"&&(Ae(e),nr(e),Mn(i,t))}function jr(e){const t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function ro(e){return!vn(e)}function rt(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function zn(e,t,i,s,l,m,y){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Ae(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=y,t._strategyHWM=m,t._pullAlgorithm=s,t._cancelAlgorithm=l,e._readableStreamController=t;const B=i();O(S(B),()=>{t._started=!0,Rt(t)},P=>{Pe(t,P)})}function no(e,t,i,s){const l=Object.create(tt.prototype);let m=()=>{},y=()=>S(void 0),B=()=>S(void 0);t.start!==void 0&&(m=()=>t.start(l)),t.pull!==void 0&&(y=()=>t.pull(l)),t.cancel!==void 0&&(B=P=>t.cancel(P)),zn(e,l,m,y,B,i,s)}function or(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function io(e,t){return De(e._readableStreamController)?ao(e):oo(e)}function oo(e,t){const i=Be(e);let s=!1,l=!1,m=!1,y=!1,B,P,F,x,q;const H=R(ie=>{q=ie});function pe(){return s?(l=!0,S(void 0)):(s=!0,ze(i,{_chunkSteps:oe=>{Oe(()=>{l=!1;const fe=oe,Re=oe;m||ir(F._readableStreamController,fe),y||ir(x._readableStreamController,Re),s=!1,l&&pe()})},_closeSteps:()=>{s=!1,m||Et(F._readableStreamController),y||Et(x._readableStreamController),(!m||!y)&&q(void 0)},_errorSteps:()=>{s=!1}}),S(void 0))}function nt(ie){if(m=!0,B=ie,y){const oe=k([B,P]),fe=he(e,oe);q(fe)}return H}function xe(ie){if(y=!0,P=ie,m){const oe=k([B,P]),fe=he(e,oe);q(fe)}return H}function Se(){}return F=Lr(Se,pe,nt),x=Lr(Se,pe,xe),G(i._closedPromise,ie=>{Pe(F._readableStreamController,ie),Pe(x._readableStreamController,ie),(!m||!y)&&q(void 0)}),[F,x]}function ao(e){let t=Be(e),i=!1,s=!1,l=!1,m=!1,y=!1,B,P,F,x,q;const H=R(T=>{q=T});function pe(T){G(T._closedPromise,I=>{T===t&&(de(F._readableStreamController,I),de(x._readableStreamController,I),(!m||!y)&&q(void 0))})}function nt(){Me(t)&&(ce(t),t=Be(e),pe(t)),ze(t,{_chunkSteps:I=>{Oe(()=>{s=!1,l=!1;const U=I;let ue=I;if(!m&&!y)try{ue=nn(I)}catch(it){de(F._readableStreamController,it),de(x._readableStreamController,it),q(he(e,it));return}m||$t(F._readableStreamController,U),y||$t(x._readableStreamController,ue),i=!1,s?Se():l&&ie()})},_closeSteps:()=>{i=!1,m||bt(F._readableStreamController),y||bt(x._readableStreamController),F._readableStreamController._pendingPullIntos.length>0&&Nt(F._readableStreamController,0),x._readableStreamController._pendingPullIntos.length>0&&Nt(x._readableStreamController,0),(!m||!y)&&q(void 0)},_errorSteps:()=>{i=!1}})}function xe(T,I){J(t)&&(ce(t),t=pn(e),pe(t));const U=I?x:F,ue=I?F:x;yn(t,T,{_chunkSteps:ot=>{Oe(()=>{s=!1,l=!1;const at=I?y:m;if(I?m:y)at||Ht(U._readableStreamController,ot);else{let Kn;try{Kn=nn(ot)}catch(Nr){de(U._readableStreamController,Nr),de(ue._readableStreamController,Nr),q(he(e,Nr));return}at||Ht(U._readableStreamController,ot),$t(ue._readableStreamController,Kn)}i=!1,s?Se():l&&ie()})},_closeSteps:ot=>{i=!1;const at=I?y:m,pr=I?m:y;at||bt(U._readableStreamController),pr||bt(ue._readableStreamController),ot!==void 0&&(at||Ht(U._readableStreamController,ot),!pr&&ue._readableStreamController._pendingPullIntos.length>0&&Nt(ue._readableStreamController,0)),(!at||!pr)&&q(void 0)},_errorSteps:()=>{i=!1}})}function Se(){if(i)return s=!0,S(void 0);i=!0;const T=Ar(F._readableStreamController);return T===null?nt():xe(T._view,!1),S(void 0)}function ie(){if(i)return l=!0,S(void 0);i=!0;const T=Ar(x._readableStreamController);return T===null?nt():xe(T._view,!0),S(void 0)}function oe(T){if(m=!0,B=T,y){const I=k([B,P]),U=he(e,I);q(U)}return H}function fe(T){if(y=!0,P=T,m){const I=k([B,P]),U=he(e,I);q(U)}return H}function Re(){}return F=Un(Re,Se,oe),x=Un(Re,ie,fe),pe(t),[F,x]}function so(e,t){ee(e,t);const i=e,s=i?.autoAllocateChunkSize,l=i?.cancel,m=i?.pull,y=i?.start,B=i?.type;return{autoAllocateChunkSize:s===void 0?void 0:Ge(s,`${t} has member 'autoAllocateChunkSize' that`),cancel:l===void 0?void 0:uo(l,i,`${t} has member 'cancel' that`),pull:m===void 0?void 0:lo(m,i,`${t} has member 'pull' that`),start:y===void 0?void 0:fo(y,i,`${t} has member 'start' that`),type:B===void 0?void 0:co(B,`${t} has member 'type' that`)}}function uo(e,t,i){return re(e,i),s=>_e(e,t,[s])}function lo(e,t,i){return re(e,i),s=>_e(e,t,[s])}function fo(e,t,i){return re(e,i),s=>ke(e,t,[s])}function co(e,t){if(e=`${e}`,e!=="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function ho(e,t){ee(e,t);const i=e?.mode;return{mode:i===void 0?void 0:po(i,`${t} has member 'mode' that`)}}function po(e,t){if(e=`${e}`,e!=="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function bo(e,t){ee(e,t);const i=e?.preventCancel;return{preventCancel:Boolean(i)}}function Dn(e,t){ee(e,t);const i=e?.preventAbort,s=e?.preventCancel,l=e?.preventClose,m=e?.signal;return m!==void 0&&mo(m,`${t} has member 'signal' that`),{preventAbort:Boolean(i),preventCancel:Boolean(s),preventClose:Boolean(l),signal:m}}function mo(e,t){if(!Ai(e))throw new TypeError(`${t} is not an AbortSignal.`)}function yo(e,t){ee(e,t);const i=e?.readable;be(i,"readable","ReadableWritablePair"),dt(i,`${t} has member 'readable' that`);const s=e?.writable;return be(s,"writable","ReadableWritablePair"),_n(s,`${t} has member 'writable' that`),{readable:i,writable:s}}class Ie{constructor(t={},i={}){t===void 0?t=null:Dt(t,"First parameter");const s=Vt(i,"Second parameter"),l=so(t,"First parameter");if($r(this),l.type==="bytes"){if(s.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");const m=_t(s,0);_i(this,l,m)}else{const m=Qt(s),y=_t(s,1);no(this,l,y,m)}}get locked(){if(!Fe(this))throw $e("locked");return We(this)}cancel(t=void 0){return Fe(this)?We(this)?_(new TypeError("Cannot cancel a stream that already has a reader")):he(this,t):_($e("cancel"))}getReader(t=void 0){if(!Fe(this))throw $e("getReader");return ho(t,"First parameter").mode===void 0?Be(this):pn(this)}pipeThrough(t,i={}){if(!Fe(this))throw $e("pipeThrough");le(t,1,"pipeThrough");const s=yo(t,"First parameter"),l=Dn(i,"Second parameter");if(We(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ke(s.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");const m=kn(this,s.writable,l.preventClose,l.preventAbort,l.preventCancel,l.signal);return D(m),s.readable}pipeTo(t,i={}){if(!Fe(this))return _($e("pipeTo"));if(t===void 0)return _("Parameter 1 is required in 'pipeTo'.");if(!Ze(t))return _(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let s;try{s=Dn(i,"Second parameter")}catch(l){return _(l)}return We(this)?_(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ke(t)?_(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):kn(this,t,s.preventClose,s.preventAbort,s.preventCancel,s.signal)}tee(){if(!Fe(this))throw $e("tee");const t=io(this);return k(t)}values(t=void 0){if(!Fe(this))throw $e("values");const i=bo(t,"First parameter");return u(this,i.preventCancel)}}Object.defineProperties(Ie.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(Ie.prototype,h.toStringTag,{value:"ReadableStream",configurable:!0}),typeof h.asyncIterator=="symbol"&&Object.defineProperty(Ie.prototype,h.asyncIterator,{value:Ie.prototype.values,writable:!0,configurable:!0});function Lr(e,t,i,s=1,l=()=>1){const m=Object.create(Ie.prototype);$r(m);const y=Object.create(tt.prototype);return zn(m,y,e,t,i,s,l),m}function Un(e,t,i){const s=Object.create(Ie.prototype);$r(s);const l=Object.create(Je.prototype);return hn(s,l,e,t,i,0,void 0),s}function $r(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Fe(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Ie}function We(e){return e._reader!==void 0}function he(e,t){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return _(e._storedError);Ct(e);const i=e._reader;i!==void 0&&Me(i)&&(i._readIntoRequests.forEach(l=>{l._closeSteps(void 0)}),i._readIntoRequests=new se);const s=e._readableStreamController[Qe](t);return te(s,g)}function Ct(e){e._state="closed";const t=e._reader;t!==void 0&&(Ot(t),J(t)&&(t._readRequests.forEach(i=>{i._closeSteps()}),t._readRequests=new se))}function Mn(e,t){e._state="errored",e._storedError=t;const i=e._reader;i!==void 0&&(ft(i,t),J(i)?(i._readRequests.forEach(s=>{s._errorSteps(t)}),i._readRequests=new se):(i._readIntoRequests.forEach(s=>{s._errorSteps(t)}),i._readIntoRequests=new se))}function $e(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function jn(e,t){ee(e,t);const i=e?.highWaterMark;return be(i,"highWaterMark","QueuingStrategyInit"),{highWaterMark:ge(i)}}const Ln=e=>e.byteLength;try{Object.defineProperty(Ln,"name",{value:"size",configurable:!0})}catch{}class ar{constructor(t){le(t,1,"ByteLengthQueuingStrategy"),t=jn(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!Nn(this))throw $n("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Nn(this))throw $n("size");return Ln}}Object.defineProperties(ar.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(ar.prototype,h.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function $n(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Nn(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof ar}const Hn=()=>1;try{Object.defineProperty(Hn,"name",{value:"size",configurable:!0})}catch{}class sr{constructor(t){le(t,1,"CountQueuingStrategy"),t=jn(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!Qn(this))throw Yn("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Qn(this))throw Yn("size");return Hn}}Object.defineProperties(sr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(sr.prototype,h.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Yn(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Qn(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof sr}function _o(e,t){ee(e,t);const i=e?.flush,s=e?.readableType,l=e?.start,m=e?.transform,y=e?.writableType;return{flush:i===void 0?void 0:wo(i,e,`${t} has member 'flush' that`),readableType:s,start:l===void 0?void 0:go(l,e,`${t} has member 'start' that`),transform:m===void 0?void 0:So(m,e,`${t} has member 'transform' that`),writableType:y}}function wo(e,t,i){return re(e,i),s=>_e(e,t,[s])}function go(e,t,i){return re(e,i),s=>ke(e,t,[s])}function So(e,t,i){return re(e,i),(s,l)=>_e(e,t,[s,l])}class ur{constructor(t={},i={},s={}){t===void 0&&(t=null);const l=Vt(i,"Second parameter"),m=Vt(s,"Third parameter"),y=_o(t,"First parameter");if(y.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(y.writableType!==void 0)throw new RangeError("Invalid writableType specified");const B=_t(m,0),P=Qt(m),F=_t(l,1),x=Qt(l);let q;const H=R(pe=>{q=pe});Ro(this,H,F,x,B,P),Co(this,y),y.start!==void 0?q(y.start(this._transformStreamController)):q(void 0)}get readable(){if(!Vn(this))throw Zn("readable");return this._readable}get writable(){if(!Vn(this))throw Zn("writable");return this._writable}}Object.defineProperties(ur.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(ur.prototype,h.toStringTag,{value:"TransformStream",configurable:!0});function Ro(e,t,i,s,l,m){function y(){return t}function B(H){return Ao(e,H)}function P(H){return Po(e,H)}function F(){return Io(e)}e._writable=Fi(y,B,F,P,i,s);function x(){return Fo(e)}function q(H){return fr(e,H),S(void 0)}e._readable=Lr(y,x,q,l,m),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,cr(e,!0),e._transformStreamController=void 0}function Vn(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof ur}function lr(e,t){Pe(e._readable._readableStreamController,t),fr(e,t)}function fr(e,t){Gn(e._transformStreamController),kr(e._writable._writableStreamController,t),e._backpressure&&cr(e,!1)}function cr(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=R(i=>{e._backpressureChangePromise_resolve=i}),e._backpressure=t}class Bt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!dr(this))throw hr("desiredSize");const t=this._controlledTransformStream._readable._readableStreamController;return jr(t)}enqueue(t=void 0){if(!dr(this))throw hr("enqueue");Xn(this,t)}error(t=void 0){if(!dr(this))throw hr("error");Bo(this,t)}terminate(){if(!dr(this))throw hr("terminate");To(this)}}Object.defineProperties(Bt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof h.toStringTag=="symbol"&&Object.defineProperty(Bt.prototype,h.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function dr(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Bt}function Eo(e,t,i,s){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=i,t._flushAlgorithm=s}function Co(e,t){const i=Object.create(Bt.prototype);let s=m=>{try{return Xn(i,m),S(void 0)}catch(y){return _(y)}},l=()=>S(void 0);t.transform!==void 0&&(s=m=>t.transform(m,i)),t.flush!==void 0&&(l=()=>t.flush(i)),Eo(e,i,s,l)}function Gn(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Xn(e,t){const i=e._controlledTransformStream,s=i._readable._readableStreamController;if(!rt(s))throw new TypeError("Readable side is not in a state that permits enqueue");try{ir(s,t)}catch(m){throw fr(i,m),i._readable._storedError}ro(s)!==i._backpressure&&cr(i,!0)}function Bo(e,t){lr(e._controlledTransformStream,t)}function Jn(e,t){const i=e._transformAlgorithm(t);return te(i,void 0,s=>{throw lr(e._controlledTransformStream,s),s})}function To(e){const t=e._controlledTransformStream,i=t._readable._readableStreamController;Et(i);const s=new TypeError("TransformStream terminated");fr(t,s)}function Ao(e,t){const i=e._transformStreamController;if(e._backpressure){const s=e._backpressureChangePromise;return te(s,()=>{const l=e._writable;if(l._state==="erroring")throw l._storedError;return Jn(i,t)})}return Jn(i,t)}function Po(e,t){return lr(e,t),S(void 0)}function Io(e){const t=e._readable,i=e._transformStreamController,s=i._flushAlgorithm();return Gn(i),te(s,()=>{if(t._state==="errored")throw t._storedError;Et(t._readableStreamController)},l=>{throw lr(e,l),t._storedError})}function Fo(e){return cr(e,!1),e._backpressureChangePromise}function hr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Zn(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}b.ByteLengthQueuingStrategy=ar,b.CountQueuingStrategy=sr,b.ReadableByteStreamController=Je,b.ReadableStream=Ie,b.ReadableStreamBYOBReader=yt,b.ReadableStreamBYOBRequest=pt,b.ReadableStreamDefaultController=tt,b.ReadableStreamDefaultReader=ve,b.TransformStream=ur,b.TransformStreamDefaultController=Bt,b.WritableStream=wt,b.WritableStreamDefaultController=et,b.WritableStreamDefaultWriter=gt,Object.defineProperty(b,"__esModule",{value:!0})})}(br,br.exports)),br.exports}var Yr={},Tt={},ri;function zo(){if(ri)return Tt;ri=1,Tt.byteLength=c,Tt.toByteArray=Q,Tt.fromByteArray=V;for(var w=[],f=[],b=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,C=h.length;g<C;++g)w[g]=h[g],f[h.charCodeAt(g)]=g;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63;function E(R){var S=R.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=R.indexOf("=");_===-1&&(_=S);var v=_===S?0:4-_%4;return[_,v]}function c(R){var S=E(R),_=S[0],v=S[1];return(_+v)*3/4-v}function Y(R,S,_){return(S+_)*3/4-_}function Q(R){var S,_=E(R),v=_[0],O=_[1],L=new b(Y(R,v,O)),G=0,te=O>0?v-4:v,D;for(D=0;D<te;D+=4)S=f[R.charCodeAt(D)]<<18|f[R.charCodeAt(D+1)]<<12|f[R.charCodeAt(D+2)]<<6|f[R.charCodeAt(D+3)],L[G++]=S>>16&255,L[G++]=S>>8&255,L[G++]=S&255;return O===2&&(S=f[R.charCodeAt(D)]<<2|f[R.charCodeAt(D+1)]>>4,L[G++]=S&255),O===1&&(S=f[R.charCodeAt(D)]<<10|f[R.charCodeAt(D+1)]<<4|f[R.charCodeAt(D+2)]>>2,L[G++]=S>>8&255,L[G++]=S&255),L}function M(R){return w[R>>18&63]+w[R>>12&63]+w[R>>6&63]+w[R&63]}function j(R,S,_){for(var v,O=[],L=S;L<_;L+=3)v=(R[L]<<16&16711680)+(R[L+1]<<8&65280)+(R[L+2]&255),O.push(M(v));return O.join("")}function V(R){for(var S,_=R.length,v=_%3,O=[],L=16383,G=0,te=_-v;G<te;G+=L)O.push(j(R,G,G+L>te?te:G+L));return v===1?(S=R[_-1],O.push(w[S>>2]+w[S<<4&63]+"==")):v===2&&(S=(R[_-2]<<8)+R[_-1],O.push(w[S>>10]+w[S>>4&63]+w[S<<2&63]+"=")),O.join("")}return Tt}var mr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var ni;function Do(){return ni||(ni=1,mr.read=function(w,f,b,h,g){var C,E,c=g*8-h-1,Y=(1<<c)-1,Q=Y>>1,M=-7,j=b?g-1:0,V=b?-1:1,R=w[f+j];for(j+=V,C=R&(1<<-M)-1,R>>=-M,M+=c;M>0;C=C*256+w[f+j],j+=V,M-=8);for(E=C&(1<<-M)-1,C>>=-M,M+=h;M>0;E=E*256+w[f+j],j+=V,M-=8);if(C===0)C=1-Q;else{if(C===Y)return E?NaN:(R?-1:1)*(1/0);E=E+Math.pow(2,h),C=C-Q}return(R?-1:1)*E*Math.pow(2,C-h)},mr.write=function(w,f,b,h,g,C){var E,c,Y,Q=C*8-g-1,M=(1<<Q)-1,j=M>>1,V=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=h?0:C-1,S=h?1:-1,_=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(c=isNaN(f)?1:0,E=M):(E=Math.floor(Math.log(f)/Math.LN2),f*(Y=Math.pow(2,-E))<1&&(E--,Y*=2),E+j>=1?f+=V/Y:f+=V*Math.pow(2,1-j),f*Y>=2&&(E++,Y/=2),E+j>=M?(c=0,E=M):E+j>=1?(c=(f*Y-1)*Math.pow(2,g),E=E+j):(c=f*Math.pow(2,j-1)*Math.pow(2,g),E=0));g>=8;w[b+R]=c&255,R+=S,c/=256,g-=8);for(E=E<<g|c,Q+=g;Q>0;w[b+R]=E&255,R+=S,E/=256,Q-=8);w[b+R-S]|=_*128}),mr}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ii;function Uo(){return ii||(ii=1,function(w){const f=zo(),b=Do(),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;w.Buffer=c,w.SlowBuffer=L,w.INSPECT_MAX_BYTES=50;const g=2147483647;w.kMaxLength=g,c.TYPED_ARRAY_SUPPORT=C(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function C(){try{const o=new Uint8Array(1),r={foo:function(){return 42}};return Object.setPrototypeOf(r,Uint8Array.prototype),Object.setPrototypeOf(o,r),o.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(!!c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(!!c.isBuffer(this))return this.byteOffset}});function E(o){if(o>g)throw new RangeError('The value "'+o+'" is invalid for option "size"');const r=new Uint8Array(o);return Object.setPrototypeOf(r,c.prototype),r}function c(o,r,n){if(typeof o=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return j(o)}return Y(o,r,n)}c.poolSize=8192;function Y(o,r,n){if(typeof o=="string")return V(o,r);if(ArrayBuffer.isView(o))return S(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(ne(o,ArrayBuffer)||o&&ne(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ne(o,SharedArrayBuffer)||o&&ne(o.buffer,SharedArrayBuffer)))return _(o,r,n);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const a=o.valueOf&&o.valueOf();if(a!=null&&a!==o)return c.from(a,r,n);const u=v(o);if(u)return u;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return c.from(o[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}c.from=function(o,r,n){return Y(o,r,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function Q(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function M(o,r,n){return Q(o),o<=0?E(o):r!==void 0?typeof n=="string"?E(o).fill(r,n):E(o).fill(r):E(o)}c.alloc=function(o,r,n){return M(o,r,n)};function j(o){return Q(o),E(o<0?0:O(o)|0)}c.allocUnsafe=function(o){return j(o)},c.allocUnsafeSlow=function(o){return j(o)};function V(o,r){if((typeof r!="string"||r==="")&&(r="utf8"),!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);const n=G(o,r)|0;let a=E(n);const u=a.write(o,r);return u!==n&&(a=a.slice(0,u)),a}function R(o){const r=o.length<0?0:O(o.length)|0,n=E(r);for(let a=0;a<r;a+=1)n[a]=o[a]&255;return n}function S(o){if(ne(o,Uint8Array)){const r=new Uint8Array(o);return _(r.buffer,r.byteOffset,r.byteLength)}return R(o)}function _(o,r,n){if(r<0||o.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');let a;return r===void 0&&n===void 0?a=new Uint8Array(o):n===void 0?a=new Uint8Array(o,r):a=new Uint8Array(o,r,n),Object.setPrototypeOf(a,c.prototype),a}function v(o){if(c.isBuffer(o)){const r=O(o.length)|0,n=E(r);return n.length===0||o.copy(n,0,0,r),n}if(o.length!==void 0)return typeof o.length!="number"||Xe(o.length)?E(0):R(o);if(o.type==="Buffer"&&Array.isArray(o.data))return R(o.data)}function O(o){if(o>=g)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g.toString(16)+" bytes");return o|0}function L(o){return+o!=o&&(o=0),c.alloc(+o)}c.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==c.prototype},c.compare=function(r,n){if(ne(r,Uint8Array)&&(r=c.from(r,r.offset,r.byteLength)),ne(n,Uint8Array)&&(n=c.from(n,n.offset,n.byteLength)),!c.isBuffer(r)||!c.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===n)return 0;let a=r.length,u=n.length;for(let d=0,p=Math.min(a,u);d<p;++d)if(r[d]!==n[d]){a=r[d],u=n[d];break}return a<u?-1:u<a?1:0},c.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(r,n){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return c.alloc(0);let a;if(n===void 0)for(n=0,a=0;a<r.length;++a)n+=r[a].length;const u=c.allocUnsafe(n);let d=0;for(a=0;a<r.length;++a){let p=r[a];if(ne(p,Uint8Array))d+p.length>u.length?(c.isBuffer(p)||(p=c.from(p)),p.copy(u,d)):Uint8Array.prototype.set.call(u,p,d);else if(c.isBuffer(p))p.copy(u,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=p.length}return u};function G(o,r){if(c.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||ne(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);const n=o.length,a=arguments.length>2&&arguments[2]===!0;if(!a&&n===0)return 0;let u=!1;for(;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Ge(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return ht(o).length;default:if(u)return a?-1:Ge(o).length;r=(""+r).toLowerCase(),u=!0}}c.byteLength=G;function te(o,r,n){let a=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,r>>>=0,n<=r))return"";for(o||(o="utf8");;)switch(o){case"hex":return gr(this,r,n);case"utf8":case"utf-8":return we(this,r,n);case"ascii":return wr(this,r,n);case"latin1":case"binary":return ft(this,r,n);case"base64":return ce(this,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ot(this,r,n);default:if(a)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),a=!0}}c.prototype._isBuffer=!0;function D(o,r,n){const a=o[r];o[r]=o[n],o[n]=a}c.prototype.swap16=function(){const r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<r;n+=2)D(this,n,n+1);return this},c.prototype.swap32=function(){const r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<r;n+=4)D(this,n,n+3),D(this,n+1,n+2);return this},c.prototype.swap64=function(){const r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<r;n+=8)D(this,n,n+7),D(this,n+1,n+6),D(this,n+2,n+5),D(this,n+3,n+4);return this},c.prototype.toString=function(){const r=this.length;return r===0?"":arguments.length===0?we(this,0,r):te.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(r){if(!c.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:c.compare(this,r)===0},c.prototype.inspect=function(){let r="";const n=w.INSPECT_MAX_BYTES;return r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(r+=" ... "),"<Buffer "+r+">"},h&&(c.prototype[h]=c.prototype.inspect),c.prototype.compare=function(r,n,a,u,d){if(ne(r,Uint8Array)&&(r=c.from(r,r.offset,r.byteLength)),!c.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(n===void 0&&(n=0),a===void 0&&(a=r?r.length:0),u===void 0&&(u=0),d===void 0&&(d=this.length),n<0||a>r.length||u<0||d>this.length)throw new RangeError("out of range index");if(u>=d&&n>=a)return 0;if(u>=d)return-1;if(n>=a)return 1;if(n>>>=0,a>>>=0,u>>>=0,d>>>=0,this===r)return 0;let p=d-u,A=a-n;const k=Math.min(p,A),z=this.slice(u,d),$=r.slice(n,a);for(let W=0;W<k;++W)if(z[W]!==$[W]){p=z[W],A=$[W];break}return p<A?-1:A<p?1:0};function Oe(o,r,n,a,u){if(o.length===0)return-1;if(typeof n=="string"?(a=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,Xe(n)&&(n=u?0:o.length-1),n<0&&(n=o.length+n),n>=o.length){if(u)return-1;n=o.length-1}else if(n<0)if(u)n=0;else return-1;if(typeof r=="string"&&(r=c.from(r,a)),c.isBuffer(r))return r.length===0?-1:ke(o,r,n,a,u);if(typeof r=="number")return r=r&255,typeof Uint8Array.prototype.indexOf=="function"?u?Uint8Array.prototype.indexOf.call(o,r,n):Uint8Array.prototype.lastIndexOf.call(o,r,n):ke(o,[r],n,a,u);throw new TypeError("val must be string, number or Buffer")}function ke(o,r,n,a,u){let d=1,p=o.length,A=r.length;if(a!==void 0&&(a=String(a).toLowerCase(),a==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le")){if(o.length<2||r.length<2)return-1;d=2,p/=2,A/=2,n/=2}function k($,W){return d===1?$[W]:$.readUInt16BE(W*d)}let z;if(u){let $=-1;for(z=n;z<p;z++)if(k(o,z)===k(r,$===-1?0:z-$)){if($===-1&&($=z),z-$+1===A)return $*d}else $!==-1&&(z-=z-$),$=-1}else for(n+A>p&&(n=p-A),z=n;z>=0;z--){let $=!0;for(let W=0;W<A;W++)if(k(o,z+W)!==k(r,W)){$=!1;break}if($)return z}return-1}c.prototype.includes=function(r,n,a){return this.indexOf(r,n,a)!==-1},c.prototype.indexOf=function(r,n,a){return Oe(this,r,n,a,!0)},c.prototype.lastIndexOf=function(r,n,a){return Oe(this,r,n,a,!1)};function _e(o,r,n,a){n=Number(n)||0;const u=o.length-n;a?(a=Number(a),a>u&&(a=u)):a=u;const d=r.length;a>d/2&&(a=d/2);let p;for(p=0;p<a;++p){const A=parseInt(r.substr(p*2,2),16);if(Xe(A))return p;o[n+p]=A}return p}function Wt(o,r,n,a){return Te(Ge(r,o.length-n),o,n,a)}function se(o,r,n,a){return Te(dt(r),o,n,a)}function xt(o,r,n,a){return Te(ht(r),o,n,a)}function lt(o,r,n,a){return Te(Be(r,o.length-n),o,n,a)}c.prototype.write=function(r,n,a,u){if(n===void 0)u="utf8",a=this.length,n=0;else if(a===void 0&&typeof n=="string")u=n,a=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(a)?(a=a>>>0,u===void 0&&(u="utf8")):(u=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const d=this.length-n;if((a===void 0||a>d)&&(a=d),r.length>0&&(a<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");u||(u="utf8");let p=!1;for(;;)switch(u){case"hex":return _e(this,r,n,a);case"utf8":case"utf-8":return Wt(this,r,n,a);case"ascii":case"latin1":case"binary":return se(this,r,n,a);case"base64":return xt(this,r,n,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lt(this,r,n,a);default:if(p)throw new TypeError("Unknown encoding: "+u);u=(""+u).toLowerCase(),p=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ce(o,r,n){return r===0&&n===o.length?f.fromByteArray(o):f.fromByteArray(o.slice(r,n))}function we(o,r,n){n=Math.min(o.length,n);const a=[];let u=r;for(;u<n;){const d=o[u];let p=null,A=d>239?4:d>223?3:d>191?2:1;if(u+A<=n){let k,z,$,W;switch(A){case 1:d<128&&(p=d);break;case 2:k=o[u+1],(k&192)===128&&(W=(d&31)<<6|k&63,W>127&&(p=W));break;case 3:k=o[u+1],z=o[u+2],(k&192)===128&&(z&192)===128&&(W=(d&15)<<12|(k&63)<<6|z&63,W>2047&&(W<55296||W>57343)&&(p=W));break;case 4:k=o[u+1],z=o[u+2],$=o[u+3],(k&192)===128&&(z&192)===128&&($&192)===128&&(W=(d&15)<<18|(k&63)<<12|(z&63)<<6|$&63,W>65535&&W<1114112&&(p=W))}}p===null?(p=65533,A=1):p>65535&&(p-=65536,a.push(p>>>10&1023|55296),p=56320|p&1023),a.push(p),u+=A}return qt(a)}const Ye=4096;function qt(o){const r=o.length;if(r<=Ye)return String.fromCharCode.apply(String,o);let n="",a=0;for(;a<r;)n+=String.fromCharCode.apply(String,o.slice(a,a+=Ye));return n}function wr(o,r,n){let a="";n=Math.min(o.length,n);for(let u=r;u<n;++u)a+=String.fromCharCode(o[u]&127);return a}function ft(o,r,n){let a="";n=Math.min(o.length,n);for(let u=r;u<n;++u)a+=String.fromCharCode(o[u]);return a}function gr(o,r,n){const a=o.length;(!r||r<0)&&(r=0),(!n||n<0||n>a)&&(n=a);let u="";for(let d=r;d<n;++d)u+=ve[o[d]];return u}function Ot(o,r,n){const a=o.slice(r,n);let u="";for(let d=0;d<a.length-1;d+=2)u+=String.fromCharCode(a[d]+a[d+1]*256);return u}c.prototype.slice=function(r,n){const a=this.length;r=~~r,n=n===void 0?a:~~n,r<0?(r+=a,r<0&&(r=0)):r>a&&(r=a),n<0?(n+=a,n<0&&(n=0)):n>a&&(n=a),n<r&&(n=r);const u=this.subarray(r,n);return Object.setPrototypeOf(u,c.prototype),u};function N(o,r,n){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+r>n)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(r,n,a){r=r>>>0,n=n>>>0,a||N(r,n,this.length);let u=this[r],d=1,p=0;for(;++p<n&&(d*=256);)u+=this[r+p]*d;return u},c.prototype.readUintBE=c.prototype.readUIntBE=function(r,n,a){r=r>>>0,n=n>>>0,a||N(r,n,this.length);let u=this[r+--n],d=1;for(;n>0&&(d*=256);)u+=this[r+--n]*d;return u},c.prototype.readUint8=c.prototype.readUInt8=function(r,n){return r=r>>>0,n||N(r,1,this.length),this[r]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(r,n){return r=r>>>0,n||N(r,2,this.length),this[r]|this[r+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(r,n){return r=r>>>0,n||N(r,2,this.length),this[r]<<8|this[r+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(r,n){return r=r>>>0,n||N(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(r,n){return r=r>>>0,n||N(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])},c.prototype.readBigUInt64LE=J(function(r){r=r>>>0,be(r,"offset");const n=this[r],a=this[r+7];(n===void 0||a===void 0)&&ge(r,this.length-8);const u=n+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24,d=this[++r]+this[++r]*2**8+this[++r]*2**16+a*2**24;return BigInt(u)+(BigInt(d)<<BigInt(32))}),c.prototype.readBigUInt64BE=J(function(r){r=r>>>0,be(r,"offset");const n=this[r],a=this[r+7];(n===void 0||a===void 0)&&ge(r,this.length-8);const u=n*2**24+this[++r]*2**16+this[++r]*2**8+this[++r],d=this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+a;return(BigInt(u)<<BigInt(32))+BigInt(d)}),c.prototype.readIntLE=function(r,n,a){r=r>>>0,n=n>>>0,a||N(r,n,this.length);let u=this[r],d=1,p=0;for(;++p<n&&(d*=256);)u+=this[r+p]*d;return d*=128,u>=d&&(u-=Math.pow(2,8*n)),u},c.prototype.readIntBE=function(r,n,a){r=r>>>0,n=n>>>0,a||N(r,n,this.length);let u=n,d=1,p=this[r+--u];for(;u>0&&(d*=256);)p+=this[r+--u]*d;return d*=128,p>=d&&(p-=Math.pow(2,8*n)),p},c.prototype.readInt8=function(r,n){return r=r>>>0,n||N(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]},c.prototype.readInt16LE=function(r,n){r=r>>>0,n||N(r,2,this.length);const a=this[r]|this[r+1]<<8;return a&32768?a|4294901760:a},c.prototype.readInt16BE=function(r,n){r=r>>>0,n||N(r,2,this.length);const a=this[r+1]|this[r]<<8;return a&32768?a|4294901760:a},c.prototype.readInt32LE=function(r,n){return r=r>>>0,n||N(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},c.prototype.readInt32BE=function(r,n){return r=r>>>0,n||N(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},c.prototype.readBigInt64LE=J(function(r){r=r>>>0,be(r,"offset");const n=this[r],a=this[r+7];(n===void 0||a===void 0)&&ge(r,this.length-8);const u=this[r+4]+this[r+5]*2**8+this[r+6]*2**16+(a<<24);return(BigInt(u)<<BigInt(32))+BigInt(n+this[++r]*2**8+this[++r]*2**16+this[++r]*2**24)}),c.prototype.readBigInt64BE=J(function(r){r=r>>>0,be(r,"offset");const n=this[r],a=this[r+7];(n===void 0||a===void 0)&&ge(r,this.length-8);const u=(n<<24)+this[++r]*2**16+this[++r]*2**8+this[++r];return(BigInt(u)<<BigInt(32))+BigInt(this[++r]*2**24+this[++r]*2**16+this[++r]*2**8+a)}),c.prototype.readFloatLE=function(r,n){return r=r>>>0,n||N(r,4,this.length),b.read(this,r,!0,23,4)},c.prototype.readFloatBE=function(r,n){return r=r>>>0,n||N(r,4,this.length),b.read(this,r,!1,23,4)},c.prototype.readDoubleLE=function(r,n){return r=r>>>0,n||N(r,8,this.length),b.read(this,r,!0,52,8)},c.prototype.readDoubleBE=function(r,n){return r=r>>>0,n||N(r,8,this.length),b.read(this,r,!1,52,8)};function X(o,r,n,a,u,d){if(!c.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>u||r<d)throw new RangeError('"value" argument is out of bounds');if(n+a>o.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(r,n,a,u){if(r=+r,n=n>>>0,a=a>>>0,!u){const A=Math.pow(2,8*a)-1;X(this,r,n,a,A,0)}let d=1,p=0;for(this[n]=r&255;++p<a&&(d*=256);)this[n+p]=r/d&255;return n+a},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(r,n,a,u){if(r=+r,n=n>>>0,a=a>>>0,!u){const A=Math.pow(2,8*a)-1;X(this,r,n,a,A,0)}let d=a-1,p=1;for(this[n+d]=r&255;--d>=0&&(p*=256);)this[n+d]=r/p&255;return n+a},c.prototype.writeUint8=c.prototype.writeUInt8=function(r,n,a){return r=+r,n=n>>>0,a||X(this,r,n,1,255,0),this[n]=r&255,n+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(r,n,a){return r=+r,n=n>>>0,a||X(this,r,n,2,65535,0),this[n]=r&255,this[n+1]=r>>>8,n+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(r,n,a){return r=+r,n=n>>>0,a||X(this,r,n,2,65535,0),this[n]=r>>>8,this[n+1]=r&255,n+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(r,n,a){return r=+r,n=n>>>0,a||X(this,r,n,4,4294967295,0),this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=r&255,n+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(r,n,a){return r=+r,n=n>>>0,a||X(this,r,n,4,4294967295,0),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255,n+4};function Qe(o,r,n,a,u){le(r,a,u,o,n,7);let d=Number(r&BigInt(4294967295));o[n++]=d,d=d>>8,o[n++]=d,d=d>>8,o[n++]=d,d=d>>8,o[n++]=d;let p=Number(r>>BigInt(32)&BigInt(4294967295));return o[n++]=p,p=p>>8,o[n++]=p,p=p>>8,o[n++]=p,p=p>>8,o[n++]=p,n}function Ve(o,r,n,a,u){le(r,a,u,o,n,7);let d=Number(r&BigInt(4294967295));o[n+7]=d,d=d>>8,o[n+6]=d,d=d>>8,o[n+5]=d,d=d>>8,o[n+4]=d;let p=Number(r>>BigInt(32)&BigInt(4294967295));return o[n+3]=p,p=p>>8,o[n+2]=p,p=p>>8,o[n+1]=p,p=p>>8,o[n]=p,n+8}c.prototype.writeBigUInt64LE=J(function(r,n=0){return Qe(this,r,n,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=J(function(r,n=0){return Ve(this,r,n,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(r,n,a,u){if(r=+r,n=n>>>0,!u){const k=Math.pow(2,8*a-1);X(this,r,n,a,k-1,-k)}let d=0,p=1,A=0;for(this[n]=r&255;++d<a&&(p*=256);)r<0&&A===0&&this[n+d-1]!==0&&(A=1),this[n+d]=(r/p>>0)-A&255;return n+a},c.prototype.writeIntBE=function(r,n,a,u){if(r=+r,n=n>>>0,!u){const k=Math.pow(2,8*a-1);X(this,r,n,a,k-1,-k)}let d=a-1,p=1,A=0;for(this[n+d]=r&255;--d>=0&&(p*=256);)r<0&&A===0&&this[n+d+1]!==0&&(A=1),this[n+d]=(r/p>>0)-A&255;return n+a},c.prototype.writeInt8=function(r,n,a){return r=+r,n=n>>>0,a||X(this,r,n,1,127,-128),r<0&&(r=255+r+1),this[n]=r&255,n+1},c.prototype.writeInt16LE=function(r,n,a){return r=+r,n=n>>>0,a||X(this,r,n,2,32767,-32768),this[n]=r&255,this[n+1]=r>>>8,n+2},c.prototype.writeInt16BE=function(r,n,a){return r=+r,n=n>>>0,a||X(this,r,n,2,32767,-32768),this[n]=r>>>8,this[n+1]=r&255,n+2},c.prototype.writeInt32LE=function(r,n,a){return r=+r,n=n>>>0,a||X(this,r,n,4,2147483647,-2147483648),this[n]=r&255,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24,n+4},c.prototype.writeInt32BE=function(r,n,a){return r=+r,n=n>>>0,a||X(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255,n+4},c.prototype.writeBigInt64LE=J(function(r,n=0){return Qe(this,r,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=J(function(r,n=0){return Ve(this,r,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ct(o,r,n,a,u,d){if(n+a>o.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function kt(o,r,n,a,u){return r=+r,n=n>>>0,u||ct(o,r,n,4),b.write(o,r,n,a,23,4),n+4}c.prototype.writeFloatLE=function(r,n,a){return kt(this,r,n,!0,a)},c.prototype.writeFloatBE=function(r,n,a){return kt(this,r,n,!1,a)};function vt(o,r,n,a,u){return r=+r,n=n>>>0,u||ct(o,r,n,8),b.write(o,r,n,a,52,8),n+8}c.prototype.writeDoubleLE=function(r,n,a){return vt(this,r,n,!0,a)},c.prototype.writeDoubleBE=function(r,n,a){return vt(this,r,n,!1,a)},c.prototype.copy=function(r,n,a,u){if(!c.isBuffer(r))throw new TypeError("argument should be a Buffer");if(a||(a=0),!u&&u!==0&&(u=this.length),n>=r.length&&(n=r.length),n||(n=0),u>0&&u<a&&(u=a),u===a||r.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("sourceEnd out of bounds");u>this.length&&(u=this.length),r.length-n<u-a&&(u=r.length-n+a);const d=u-a;return this===r&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,a,u):Uint8Array.prototype.set.call(r,this.subarray(a,u),n),d},c.prototype.fill=function(r,n,a,u){if(typeof r=="string"){if(typeof n=="string"?(u=n,n=0,a=this.length):typeof a=="string"&&(u=a,a=this.length),u!==void 0&&typeof u!="string")throw new TypeError("encoding must be a string");if(typeof u=="string"&&!c.isEncoding(u))throw new TypeError("Unknown encoding: "+u);if(r.length===1){const p=r.charCodeAt(0);(u==="utf8"&&p<128||u==="latin1")&&(r=p)}}else typeof r=="number"?r=r&255:typeof r=="boolean"&&(r=Number(r));if(n<0||this.length<n||this.length<a)throw new RangeError("Out of range index");if(a<=n)return this;n=n>>>0,a=a===void 0?this.length:a>>>0,r||(r=0);let d;if(typeof r=="number")for(d=n;d<a;++d)this[d]=r;else{const p=c.isBuffer(r)?r:c.from(r,u),A=p.length;if(A===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(d=0;d<a-n;++d)this[d+n]=p[d%A]}return this};const ee={};function re(o,r,n){ee[o]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:r.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${o}]`,this.stack,delete this.name}get code(){return o}set code(u){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:u,writable:!0})}toString(){return`${this.name} [${o}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(o){return o?`${o} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(o,r){return`The "${o}" argument must be of type number. Received type ${typeof r}`},TypeError),re("ERR_OUT_OF_RANGE",function(o,r,n){let a=`The value of "${o}" is out of range.`,u=n;return Number.isInteger(n)&&Math.abs(n)>2**32?u=zt(String(n)):typeof n=="bigint"&&(u=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(u=zt(u)),u+="n"),a+=` It must be ${r}. Received ${u}`,a},RangeError);function zt(o){let r="",n=o.length;const a=o[0]==="-"?1:0;for(;n>=a+4;n-=3)r=`_${o.slice(n-3,n)}${r}`;return`${o.slice(0,n)}${r}`}function Dt(o,r,n){be(r,"offset"),(o[r]===void 0||o[r+n]===void 0)&&ge(r,o.length-(n+1))}function le(o,r,n,a,u,d){if(o>n||o<r){const p=typeof r=="bigint"?"n":"";let A;throw d>3?r===0||r===BigInt(0)?A=`>= 0${p} and < 2${p} ** ${(d+1)*8}${p}`:A=`>= -(2${p} ** ${(d+1)*8-1}${p}) and < 2 ** ${(d+1)*8-1}${p}`:A=`>= ${r}${p} and <= ${n}${p}`,new ee.ERR_OUT_OF_RANGE("value",A,o)}Dt(a,u,d)}function be(o,r){if(typeof o!="number")throw new ee.ERR_INVALID_ARG_TYPE(r,"number",o)}function ge(o,r,n){throw Math.floor(o)!==o?(be(o,n),new ee.ERR_OUT_OF_RANGE(n||"offset","an integer",o)):r<0?new ee.ERR_BUFFER_OUT_OF_BOUNDS:new ee.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${r}`,o)}const Ut=/[^+/0-9A-Za-z-_]/g;function Sr(o){if(o=o.split("=")[0],o=o.trim().replace(Ut,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function Ge(o,r){r=r||1/0;let n;const a=o.length;let u=null;const d=[];for(let p=0;p<a;++p){if(n=o.charCodeAt(p),n>55295&&n<57344){if(!u){if(n>56319){(r-=3)>-1&&d.push(239,191,189);continue}else if(p+1===a){(r-=3)>-1&&d.push(239,191,189);continue}u=n;continue}if(n<56320){(r-=3)>-1&&d.push(239,191,189),u=n;continue}n=(u-55296<<10|n-56320)+65536}else u&&(r-=3)>-1&&d.push(239,191,189);if(u=null,n<128){if((r-=1)<0)break;d.push(n)}else if(n<2048){if((r-=2)<0)break;d.push(n>>6|192,n&63|128)}else if(n<65536){if((r-=3)<0)break;d.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((r-=4)<0)break;d.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return d}function dt(o){const r=[];for(let n=0;n<o.length;++n)r.push(o.charCodeAt(n)&255);return r}function Be(o,r){let n,a,u;const d=[];for(let p=0;p<o.length&&!((r-=2)<0);++p)n=o.charCodeAt(p),a=n>>8,u=n%256,d.push(u),d.push(a);return d}function ht(o){return f.toByteArray(Sr(o))}function Te(o,r,n,a){let u;for(u=0;u<a&&!(u+n>=r.length||u>=o.length);++u)r[u+n]=o[u];return u}function ne(o,r){return o instanceof r||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===r.name}function Xe(o){return o!==o}const ve=function(){const o="0123456789abcdef",r=new Array(256);for(let n=0;n<16;++n){const a=n*16;for(let u=0;u<16;++u)r[a+u]=o[n]+o[u]}return r}();function J(o){return typeof BigInt>"u"?ze:o}function ze(){throw new Error("BigInt not supported")}}(Yr)),Yr}const Mo=65536;if(!globalThis.ReadableStream)try{const w=Xr,{emitWarning:f}=w;try{w.emitWarning=()=>{},Object.assign(globalThis,Xr),w.emitWarning=f}catch(b){throw w.emitWarning=f,b}}catch{Object.assign(globalThis,vo())}try{const{Blob:w}=Uo();w&&!w.prototype.stream&&(w.prototype.stream=function(b){let h=0;const g=this;return new ReadableStream({type:"bytes",async pull(C){const c=await g.slice(h,Math.min(g.size,h+Mo)).arrayBuffer();h+=c.byteLength,C.enqueue(new Uint8Array(c)),h===g.size&&C.close()}})})}catch{}/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */const oi=65536;async function*Qr(w,f=!0){for(const b of w)if("stream"in b)yield*b.stream();else if(ArrayBuffer.isView(b))if(f){let h=b.byteOffset;const g=b.byteOffset+b.byteLength;for(;h!==g;){const C=Math.min(g-h,oi),E=b.buffer.slice(h,h+C);h+=E.byteLength,yield new Uint8Array(E)}}else yield b;else{let h=0,g=b;for(;h!==g.size;){const E=await g.slice(h,Math.min(g.size,h+oi)).arrayBuffer();h+=E.byteLength,yield new Uint8Array(E)}}}var Ce,Pt,st,_r,ut;const li=(ut=class{constructor(f=[],b={}){Ee(this,Ce,[]);Ee(this,Pt,"");Ee(this,st,0);Ee(this,_r,"transparent");if(typeof f!="object"||f===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof f[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof b!="object"&&typeof b!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");b===null&&(b={});const h=new TextEncoder;for(const C of f){let E;ArrayBuffer.isView(C)?E=new Uint8Array(C.buffer.slice(C.byteOffset,C.byteOffset+C.byteLength)):C instanceof ArrayBuffer?E=new Uint8Array(C.slice(0)):C instanceof ut?E=C:E=h.encode(`${C}`),ye(this,st,Z(this,st)+(ArrayBuffer.isView(E)?E.byteLength:E.size)),Z(this,Ce).push(E)}ye(this,_r,`${b.endings===void 0?"transparent":b.endings}`);const g=b.type===void 0?"":String(b.type);ye(this,Pt,/^[\x20-\x7E]*$/.test(g)?g:"")}get size(){return Z(this,st)}get type(){return Z(this,Pt)}async text(){const f=new TextDecoder;let b="";for await(const h of Qr(Z(this,Ce),!1))b+=f.decode(h,{stream:!0});return b+=f.decode(),b}async arrayBuffer(){const f=new Uint8Array(this.size);let b=0;for await(const h of Qr(Z(this,Ce),!1))f.set(h,b),b+=h.length;return f.buffer}stream(){const f=Qr(Z(this,Ce),!0);return new globalThis.ReadableStream({type:"bytes",async pull(b){const h=await f.next();h.done?b.close():b.enqueue(h.value)},async cancel(){await f.return()}})}slice(f=0,b=this.size,h=""){const{size:g}=this;let C=f<0?Math.max(g+f,0):Math.min(f,g),E=b<0?Math.max(g+b,0):Math.min(b,g);const c=Math.max(E-C,0),Y=Z(this,Ce),Q=[];let M=0;for(const V of Y){if(M>=c)break;const R=ArrayBuffer.isView(V)?V.byteLength:V.size;if(C&&R<=C)C-=R,E-=R;else{let S;ArrayBuffer.isView(V)?(S=V.subarray(C,Math.min(R,E)),M+=S.byteLength):(S=V.slice(C,Math.min(R,E)),M+=S.size),E-=R,Q.push(S),C=0}}const j=new ut([],{type:String(h).toLowerCase()});return ye(j,st,c),ye(j,Ce,Q),j}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](f){return f&&typeof f=="object"&&typeof f.constructor=="function"&&(typeof f.stream=="function"||typeof f.arrayBuffer=="function")&&/^(Blob|File)$/.test(f[Symbol.toStringTag])}},Ce=new WeakMap,Pt=new WeakMap,st=new WeakMap,_r=new WeakMap,ut);Object.defineProperties(li.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});const Jr=li;/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */if(!globalThis.DOMException)try{const{MessageChannel:w}=Xr,f=new w().port1,b=new ArrayBuffer;f.postMessage(b,[b,b])}catch(w){w.constructor.name==="DOMException"&&(globalThis.DOMException=w.constructor)}var K=globalThis.DOMException,It,Ft,ui;const jo=(ui=class extends Jr{constructor(b,h,g={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(b,g);Ee(this,It,0);Ee(this,Ft,"");g===null&&(g={});const C=g.lastModified===void 0?Date.now():Number(g.lastModified);Number.isNaN(C)||ye(this,It,C),ye(this,Ft,String(h))}get name(){return Z(this,Ft)}get lastModified(){return Z(this,It)}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](b){return!!b&&b instanceof Jr&&/^(File)$/.test(b[Symbol.toStringTag])}},It=new WeakMap,Ft=new WeakMap,ui),Lo=jo;var en=nw.require("fs");en.statSync;const $o=en.createReadStream,No=en.promises;var Ho=nw.require("path");const Yo=Ho.basename,{stat:fi}=No,Qo=(w,f)=>fi(w).then(b=>Vo(b,w,f)),Vo=(w,f,b="")=>new Lo([new Zr({path:f,size:w.size,lastModified:w.mtimeMs,start:0})],Yo(f),{type:b,lastModified:w.mtimeMs});var Ne,He;const tn=class{constructor(f){Ee(this,Ne,void 0);Ee(this,He,void 0);ye(this,Ne,f.path),ye(this,He,f.start),this.size=f.size,this.lastModified=f.lastModified}slice(f,b){return new tn({path:Z(this,Ne),lastModified:this.lastModified,size:b-f,start:Z(this,He)+f})}async*stream(){const{mtimeMs:f}=await fi(Z(this,Ne));if(f>this.lastModified)throw new K("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*$o(Z(this,Ne),{start:Z(this,He),end:Z(this,He)+this.size-1})}get[Symbol.toStringTag](){return"Blob"}};let Zr=tn;Ne=new WeakMap,He=new WeakMap;const Go=globalThis&&globalThis.__classPrivateFieldGet||function(w,f,b,h){if(b==="a"&&!h)throw new TypeError("Private accessor was defined without a getter");if(typeof f=="function"?w!==f||!h:!f.has(w))throw new TypeError("Cannot read private member from an object whose class did not declare it");return b==="m"?h:b==="a"?h.call(w):h?h.value:f.get(w)};let Kr,ci;var Xo=nw.require("path");const yr=Xo.join;var ae=nw.require("fs").promises;const{INVALID:Jo,GONE:qe,MISMATCH:ai,MOD_ERR:si,SYNTAX:Vr}=qo;class Zo{constructor(f,b,h){this.position=0,this.fileHandle=f,this.path=b,this.size=h,this.position=0}async abort(){await this.fileHandle.close()}async write(f){try{await ae.stat(this.path)}catch(h){if(h.code==="ENOENT")throw await this.fileHandle.close().catch(),new K(...qe)}if(xo(f)){if(f.type==="write"){if(typeof f.position=="number"&&f.position>=0&&(this.position=f.position),!("data"in f))throw await this.fileHandle.close(),new K(...Vr("write requires a data argument"));f=f.data}else if(f.type==="seek")if(Number.isInteger(f.position)&&f.position>=0){if(this.size<f.position)throw new K(...Jo);this.position=f.position;return}else throw await this.fileHandle.close(),new K(...Vr("seek requires a position argument"));else if(f.type==="truncate")if(Number.isInteger(f.size)&&f.size>=0){await this.fileHandle.truncate(f.size),this.size=f.size,this.position>this.size&&(this.position=this.size);return}else throw await this.fileHandle.close(),new K(...Vr("truncate requires a size argument"))}if(f instanceof ArrayBuffer)f=new Uint8Array(f);else if(typeof f=="string")f=Buffer.from(f);else if(f instanceof Jr){for await(const h of f.stream()){const g=await this.fileHandle.writev([h],this.position);this.position+=g.bytesWritten,this.size+=g.bytesWritten}return}const b=await this.fileHandle.writev([f],this.position);this.position+=b.bytesWritten,this.size+=b.bytesWritten}async close(){await this.fileHandle.close(),await ae.stat(this.path).catch(f=>{if(f.code==="ENOENT")throw new K(...qe)})}}class Gr{constructor(f,b){Kr.add(this),this.kind="file",this.writable=!0,this._path=f,this.name=b}async getFile(){return await ae.stat(this._path).catch(f=>{if(f.code==="ENOENT")throw new K(...qe)}),await Qo(this._path)}async isSameEntry(f){return this._path===Go(this,Kr,"m",ci).apply(f)}async createWritable(){const f=await ae.open(this._path,"r+").catch(h=>{throw h.code==="ENOENT"?new K(...qe):h}),{size:b}=await f.stat();return new Zo(f,this._path,b)}}Kr=new WeakSet,ci=function(){return this._path};class At{constructor(f="",b=""){this.kind="directory",this.writable=!0,this.name=b,this._path=f}async isSameEntry(f){return this._path===f._path}async*entries(){const f=this._path,b=await ae.readdir(f).catch(h=>{throw h.code==="ENOENT"?new K(...qe):h});for(const h of b){const g=yr(f,h),C=await ae.lstat(g);C.isFile()?yield[h,new Gr(g,h)]:C.isDirectory()&&(yield[h,new At(g,h)])}}async getDirectoryHandle(f,b={}){const h=yr(this._path,f),g=await ae.lstat(h).catch(E=>{if(E.code!=="ENOENT")throw E}),C=g?.isDirectory();if(g&&C)return new At(h,f);if(g&&!C)throw new K(...ai);if(!b.create)throw new K(...qe);return await ae.mkdir(h),new At(h,f)}async getFileHandle(f,b={}){const h=yr(this._path,f),g=await ae.lstat(h).catch(E=>{if(E.code!=="ENOENT")throw E}),C=g?.isFile();if(g&&C)return new Gr(h,f);if(g&&!C)throw new K(...ai);if(!b.create)throw new K(...qe);return await(await ae.open(h,"w")).close(),new Gr(h,f)}async queryPermission(){return"granted"}async removeEntry(f,b){const h=yr(this._path,f);(await ae.lstat(h).catch(C=>{throw C.code==="ENOENT"?new K(...qe):C})).isDirectory()?b.recursive?await ae.rm(h,{recursive:!0}).catch(C=>{throw C.code==="ENOTEMPTY"?new K(...si):C}):await ae.rmdir(h).catch(C=>{throw C.code==="ENOTEMPTY"?new K(...si):C}):await ae.unlink(h)}}const ia=w=>new At(w);export{Gr as FileHandle,At as FolderHandle,Zo as Sink,ia as default};
